!function e(a,t,n){function i(o,s){if(!t[o]){if(!a[o]){var m="function"==typeof require&&require;if(!s&&m)return m(o,!0);if(r)return r(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=t[o]={exports:{}};a[o][0].call(u.exports,function(e){var t=a[o][1][e];return i(t?t:e)},u,u.exports,e,a,t,n)}return t[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,a,t){"use strict";function n(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function i(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}function r(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var s,m,d=function e(a,t,n){null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,t);if(void 0===i){var r=Object.getPrototypeOf(a);return null===r?void 0:e(r,t,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),l=e("./strings.js"),h=e("./gameover.js"),y=e("./model.js"),c=1e3,p=500,g=30,f=1e3,A="/naruto-js",O=A+"/assets/sprites/",w=3,I=1,N=3,v=5,M=0,b=3,x=40,k=10,Q=10,T=25,C=100,L=10,_=25,R=10,U=1,S=2,E=3,F=4,B=5,D=6,P=12,j=10,G=20,H=16,Y=10,Z=100,K=100,X=20,q=40,z=100,V=73,J=80,W=73,ee=81,ae=14,te=K,ne=101,ie=81,re=100,oe=50,se=33,me=43,de=43,ue=43,le=34,he=29,ye=26,ce=27,pe=10,ge=25,$e=25,fe=3,Ae=0,Oe=1,we=new Array,Ie=new Array(3),Ne=new Array,ve=new Array,Me=new Array,be=!1,xe=!1,ke=-1,Qe=-1,Te=new Array,Ce=!1,Le=".left",_e=".right",Re=Le;$(function(){function e(e){$("#boxes.mini"+e).each(function(){($(this).hasClass("first")||$(this).hasClass("second")||$(this).hasClass("third"))&&Te.push($(this).find("img").attr("id"))}),".left"==e?Te.unshift("naruto"):Te.unshift("sasuke")}function a(e,a,t,n){$(e).find("img").length<n?$(e).prepend("<img id="+t+' src= "'+a+'"/>'):($(e).find("img").attr("src",a),$(e).find("img").attr("id",t))}function t(e,t){var n="#boxes.mini"+Re,i="#boxes.choose"+Re,r=m.tryAddPlayer(e),o=t.replace("Avatar1","Playable");1==r?a(n+".first",t,e,1):2==r?a(n+".second",t,e,1):(a(n+".third",t,e,1),$(l.button.id).text(l.button.startGame),Ce=!0),a(i,o,e,1)}function A(e){$(e).hasClass("avatar")&&($(e).css("cursor","pointer"),$(e).click(function(){var a=$(e).find("img"),n=a.attr("src"),i=a.attr("id");t(i,n)}))}function Ue(e){".left"==e?(Se(e),$(e).each(function(){$(this).hasClass("fillspace")||$(this).fadeOut("slow")})):($(e).each(function(){$(this).fadeOut("slow")}),Se(e))}function Se(e){".left"==e?($("div#boxes.fillspace.clear")[0].style.display="none",$("div#boxes.fillspace").addClass("clear"),$("#welcomeScreen").animate({paddingLeft:"20%"},"slow")):$("#welcomeScreen").animate({paddingLeft:"20%"},"slow")}function Ee(){$(l.mode.onePlayer.id).fadeOut("slow"),$(l.mode.twoPlayers.id).fadeOut("slow"),$(l.button.id).text(l.button.chooseTeam),$(".choose").each(function(){$(this).css("cursor","pointer"),$(this).addClass("shadow"),$(this).click(function(){$(l.button.id).text(l.button.chooseOrder),m=new ma,$(this).hasClass("left")?(Ue(_e),$(".choose"+_e).css("cursor","default"),$(Re).each(function(){$(this).addClass("shadow"),$(this).addClass("red"),A($(this))})):(Re=_e,Ue(Le),$(".choose"+Le).css("cursor","default"),$(Re).each(function(){$(this).addClass("shadow"),$(this).addClass("blue"),A($(this))})),$(".choose").each(function(){$(this).unbind("click")})})})}function Fe(){}function Be(){Be=!0,Ee()}function De(){Be=!1,Fe()}function Pe(){$(l.mode.onePlayer.id).click(function(){Be()}),$(l.mode.twoPlayers.id).click(function(){De()})}function je(e){s.updateScore(e),$(".score").text(Ge().toString()),$(".score").animate({fontSize:"50px"},"slow"),$(".score").animate({fontSize:"25px"},"slow")}function Ge(){return null!=s?s.getScore():-1}function He(e){var a=$(".level");a.text("LEVEL "+e.toString()),a.animate({fontSize:"80px",opacity:1,left:"+=50"},2e3),a.animate({fontSize:"75px",opacity:0,left:"-=50"},"fast")}function Ye(){$("#meter span[class ^='health']").each(function(){$(this).animate({width:K})}),$("#meter span[class ^='chakra']").each(function(){$(this).animate({width:Z})}),Xe(ba),Qe=-1,ke=-1}function Ze(){var e=$("#player")[0].player.chakra;$("#meter span[class ^='chakra']").each(function(){e!=Qe&&(e>=0?($(this).animate({width:e}),e<=e/4&&($(this).id="red"),Qe=e):($(this).animate({width:0}),$(this).id="blue",Qe=-1))})}function Ke(){var e=$("#player")[0].player.shield;$("#meter span[class ^='health']").each(function(){e!=ke&&(ke=e,e>0?($(this).id="green",$(this).animate({width:e}),e>K/4&&e<=K/1.5?(Xe(xa),$(this).id="orange"):e<=K/4&&($(this).id="red",Xe(ka))):($(this).animate({width:"0"}),ke=-1,Ye()))})}function Xe(e){$("#playerAvatar").setAnimation(e)}function qe(){Ke(),Ze()}function ze(e,a){var t="item1_"+Math.ceil(1e3*Math.random());$("#items").addSprite(t,{animation:ve.life,posx:e,posy:a,width:ye,height:ce}),$("#"+t).addClass("items"),$("#"+t)[0].items=new la($("#"+t),D,100,Y)}function Ve(e,a,t,n,i,r,o){var s="sfx1_"+Math.ceil(1e3*Math.random());return e==Me.chargeSfx?($("#player").addSprite(s,{animation:e,posx:a+n,posy:t+i,width:r,height:o}),$("#"+s)):void(e!=Me.chargeSfx&&($("#sfx").addSprite(s,{animation:e,posx:a+n,posy:t+i,width:r,height:o}),setTimeout(function(){Je($("#"+s))},300)))}function Je(e){$(e)[0].remove()}function We(e){var a=parseInt(e.x()),t=parseInt(e.y()),n="enemiesMissile_"+Math.ceil(1e3*Math.random());$("#enemiesMissileLayer").addSprite(n,{animation:Ne.enemies,posx:a-30,posy:t+20,width:25,height:17}),$("#"+n).addClass("enemiesMissiles")}function ea(e,a){a==M?$(e)[0].enemy instanceof Da?e.setAnimation(Ie[2].attack):$(e)[0].enemy instanceof Ba?e.setAnimation(Ie[1].attack):e.setAnimation(Ie[0].attack):a==b&&($(e)[0].enemy instanceof Da?(Ve(Me.sfx3,$(e).x(),$(e).y(),20,-35,100,48),e.setAnimation(Ie[2].explode)):$(e)[0].enemy instanceof Ba?e.setAnimation(Ie[1].explode):e.setAnimation(Ie[0].explode))}function aa(){$(".enemy").each(function(){this.enemy.update($("#player"));var e=parseInt($(this).x());if(e+J<0)return void $(this).remove();if(!xe){var a=$(this).collision("#playerBody, #player");if(!(a.length<=0)){if(this.enemy.damage($("#player")[0].player.shield)){var t=0;if(this.enemy instanceof Da){var n=this;$(this).setAnimation(Ie[2].damage,ea(n.enemy.node,b)),console.log("boss defeated by player collision"),n.enemy.onDestroy(),$(this).w(J),t=R}else this.enemy instanceof Ba?($(this).setAnimation(Ie[1].explode,function(e){$(e).remove()}),$(this).w(J),t=_):($(this).setAnimation(Ie[0].explode,function(e){$(e).remove()}),$(this).w(J),t=L);je(t),$(this).removeClass("enemy")}else Ve(Me.sfx1,$(this).x(),$(this).y(),20,-35,55,41);$("#player")[0].player.damage(this.enemy.collisionDamage)?ia($("#playerBody")):($("#playerBody").setAnimation(we.damage),Ve(Me.sfx2,$("#player").x(),$("#player").y(),20,-35,70,42),Ke())}}})}function ta(){$(".playerMissiles").each(function(){if(this.playerMissiles.update(),$(this).x()>c)return void $(this).remove();var e=$(this).collision("#actors,.enemy");if(!(e.length<=0)){this.playerMissiles.type==S?(this.playerMissiles.update(),$(this).setAnimation(Ne.playerexplode,function(e){$(e).remove()})):$(this).setAnimation(Ne.enemiesexplode,function(e){$(e).remove()});var a=this.playerMissiles.damage;$(this).removeClass("playerMissiles"),e.each(function(){var e=this;if(this.enemy.damage(a)){if(this.enemy instanceof Da){var t,n;!function(){var a=e;je(R),t=$(e).x(),n=$(e).y(),$(e).setAnimation(Ie[2].explode,function(e){console.log("player missile killed boss"),a.enemy.onDestroy()}),$(e).w(J),ze(t,n)}()}else this.enemy instanceof Ba?(je(_),$(this).setAnimation(Ie[1].explode,function(a){return e.enemy.onDestroy()}),$(this).w(J)):(je(L),$(this).setAnimation(Ie[0].explode,function(a){return e.enemy.onDestroy()}),$(this).w(J));$(this).removeClass("enemy")}else Ve(Me.sfx1,$(this).x(),$(this).y(),20,-35,55,41),this.enemy instanceof Da?($(this).setAnimation(Ie[2].damage),$(this).w(J)):this.enemy instanceof Ba?($(this).setAnimation(Ie[1].damage),$(this).w(J)):($(this).setAnimation(Ie[0].damage),$(this).w(J))})}}),$(".enemiesMissiles").each(function(){var e=parseInt($(this).x());if(e<0)return void $(this).remove();if($(this).x(e-G),!xe){var a=$(this).collision("#player,#playerBody");a.length>0&&(a.each(function(){$("#player")[0].player.damage(k)?ia($("#playerBody")):(Ve(Me.sfx2,$("#player").x(),$("#player").y(),20,-35,70,42),$("#playerBody").setAnimation(we.damage),Ke())}),$(this).setAnimation(Ne.enemiesexplode,function(e){$(e).remove()}),$(this).removeClass("enemiesMissiles"))}})}function na(){$(".items").each(function(){this.items.update();var e=this.items.type,a=this.items.health;if($(this).x()<0)return void $(this).remove();var t=$(this).collision("#player,#playerBody");t.length>0&&(t.each(function(){e==F?($("#player")[0].player.healHealth(a),Ke()):e==B?($("#player")[0].player.healChakra(a),Ze()):e==D?($("#player")[0].player.healHealth(a),$("#player")[0].player.healChakra(a),qe(),$("#player")[0].player.replay+=1):je(pe)}),$(this).removeClass("items"),$(this).remove())})}function ia(e){e.setAnimation(we.die),be=!0,Ke()}function ra(){console.log("share high score and chosen team and ranking to facebook")}function oa(){window.location.reload()}function sa(e){var a=O+e;ba=new $.gameQuery.Animation({imageURL:a+"Avatar1.png"}),xa=new $.gameQuery.Animation({imageURL:a+"Avatar2.png"}),ka=new $.gameQuery.Animation({imageURL:a+"Avatar3.png"}),we.idle=new $.gameQuery.Animation({imageURL:a+"Idle.png"}),we.damage=new $.gameQuery.Animation({imageURL:a+"Damage.png",numberOfFrame:6,delta:40,rate:60,type:$.gameQuery.ANIMATION_ONCE}),we.die=new $.gameQuery.Animation({imageURL:a+"DeathMulti.png",numberOfFrame:4,delta:82,rate:60,distance:82,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI}),we.up=new $.gameQuery.Animation({imageURL:a+"Crouch.png",numberOfFrame:6,delta:40,rate:60,type:$.gameQuery.ANIMATION_ONCE}),we.down=new $.gameQuery.Animation({imageURL:a+"Crouch.png",numberOfFrame:6,delta:40,rate:60,type:$.gameQuery.ANIMATION_ONCE}),we.boost=new $.gameQuery.Animation({imageURL:a+"Boost.png",numberOfFrame:6,delta:40,rate:60,type:$.gameQuery.ANIMATION_ONCE}),we.backward=new $.gameQuery.Animation({imageURL:a+"Backward.png",numberOfFrame:6,delta:40,rate:60,type:$.gameQuery.ANIMATION_ONCE}),we.attack=new $.gameQuery.Animation({imageURL:a+"AttackMulti.png",numberOfFrame:5,delta:82,rate:60,distance:92,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI}),we.charge=new $.gameQuery.Animation({imageURL:a+"Charge.png",numberOfFrame:6,delta:40,rate:60,type:$.gameQuery.ANIMATION_ONCE})}function ma(){this.playerOrderArray=new Array,this.getCurrentPlayer=function(){return this.playerOrderArray[0]},this.tryAddPlayer=function(e){return this.playerOrderArray.length<3?this.addPlayer(e):(this.removePlayer(),this.addPlayer(e))},this.addPlayer=function(e){return this.playerOrderArray.push(e)},this.removePlayer=function(){return this.playerOrderArray.pop()}}function da(e){return this.node=$(e),this.replay=fe,this.shield=K,this.chakra=Z,this.respawnTime=-1,this.chakraDamage=function(e){return this.chakra-e>0&&(this.chakra-=e,!0)},this.restoreChakra=function(){this.chakra<Z&&(this.chakra+=5)},this.damage=function(e){return!xe&&(this.shield-=e,this.shield<=0)},this.healHealth=function(e){xe||this.shield<K&&(this.shield=Math.min(this.shield+e,K))},this.healChakra=function(e){xe||this.chakra<Z&&(this.chakra=Math.min(this.chakra+e,Z))},this.respawn=function(){return this.replay--,0==this.replay||(xe=!0,this.shield=K,this.chakra=Z,this.respawnTime=(new Date).getTime(),$(this.node).fadeTo(3,.25),!1)},this.update=function(){this.respawnTime>0&&(new Date).getTime()-this.respawnTime>3e3&&(xe=!1,$(this.node).fadeTo(0,1),this.respawnTime=-1)},!0}function ua(e,a,t,n){this.node=$(e),this.type=a,this.damage=t,this.speedx=n,this.speedy=0,this.update=function(){this.updateX(),this.updateY()},this.updateY=function(){this.node.y(parseInt(this.node.y())+this.speedy)},this.updateX=function(){this.node.x(parseInt(this.node.x())+this.speedx)}}function la(e,a,t,n){this.node=$(e),this.type=a,this.health=t,this.speedx=n,this.speedy=0,this.update=function(){this.updateX(),this.updateY()},this.updateY=function(){this.node.y(parseInt(this.node.y())-this.speedy)},this.updateX=function(){this.node.x(parseInt(this.node.x())-this.speedx)}}function ha(){var e=document.createElement("span");e.width="0%",e.className="health",e.id="green",$("#meter")[0].appendChild(e)}function ya(){var e=document.createElement("span");e.width="0%",e.className="chakra",e.id="blue",$("#meter")[0].appendChild(e)}function ca(){var e=document.createElement("div");e.className="score",$("#score")[0].appendChild(e);var a=document.createTextNode("0");$(".score")[0].appendChild(a)}function pa(){$("#avatar").addSprite("playerAvatar",{animation:ba,width:ie,height:ne})}function ga(e){var a=document.createElement("div");a.className="level",$("#text")[0].appendChild(a),a.appendChild(document.createTextNode("LEVEL "+e))}function $a(){$("#player")[0].player=new da($("#player")[0])}function fa(){var e=$("#welcomeMusic");e[0].volume=0,e[0].play(),e.animate({volume:1},3e3)}function Aa(){$("#welcomeScreen > #boxes").each(function(){$(this).css({animation:"fadeIn 2s ease 1s 1","-webkit-animation":"fadeIn 2s ease 1s 1"})})}function Oa(){$.playground().addGroup("background",{width:c,height:p}).end().addGroup("actors",{width:c,height:p}).end().addGroup("items",{width:c,height:p}).end().addGroup("player",{posx:c/3,posy:p/2,width:ee,height:W}).addSprite("cloud",{animation:Sa,posx:0,posy:0,width:81,height:73}).addSprite("playerBody",{animation:we.idle,posx:0,posy:0,width:ee,height:W}).end().addGroup("playerMissileLayer",{width:c,height:p}).end().addGroup("enemiesMissileLayer",{width:c,height:p}).end().addGroup("avatar",{posy:p-ne-10,width:ie,height:ne}).end().addGroup("meter",{posx:ie,posy:p-4*ae,width:te,height:ae}).end().addGroup("score",{posx:re,posy:oe,width:re,height:oe}).end().addGroup("text",{width:c,height:p}).end().addGroup("sfx",{width:c,height:p}).end()}function wa(){s=new y.game,Oa(),Ia(),Na(),ha(),ya(),ca(),ga(1),pa(),$a(),fa()}function Ia(){$("#background").addSprite("backgroundStage1",{animation:Ua,width:c,height:p,posx:0,posy:0}).addSprite("backgroundStage2",{animation:Ua,width:c,height:p,posx:c,posy:0}).addSprite("background1",{animation:Qa,width:c,height:p/4.2}).addSprite("background2",{animation:Ta,width:c,height:p,posx:c,posy:p/3.8}).addSprite("background3",{animation:Ca,width:c,height:p,posy:p/6}).addSprite("background4",{animation:La,width:c,height:p,posx:c,posy:p/3}).addSprite("background5",{animation:_a,width:c,height:p,posy:p/5}).addSprite("background6",{animation:Ra,width:c,height:p,posx:c,posy:p/4})}function Na(){$.playground().registerCallback(function(){var e=(parseInt($("#background1").x())-I-c)%(-2*c)+c;$("#background1").x(e),e=(parseInt($("#background2").x())-I-c)%(-2*c)+c,$("#background2").x(e),e=(parseInt($("#background3").x())-N-c)%(-2*c)+c,$("#background3").x(e),e=(parseInt($("#background4").x())-N-c)%(-2*c)+c,$("#background4").x(e),e=(parseInt($("#background5").x())-v-c)%(-2*c)+c,$("#background5").x(e),e=(parseInt($("#background6").x())-v-c)%(-2*c)+c,$("#background6").x(e),e=(parseInt($("#backgroundStage1").x())-w-c)%(-2*c)+c,$("#backgroundStage1").x(e),e=(parseInt($("#backgroundStage2").x())-w-c)%(-2*c)+c,$("#backgroundStage2").x(e)},g),$.playground().registerCallback(function(){if(!s.isGameOver()&&!s.isBossMode()){var e=Math.random();if(e<.5){var a="enemy1_"+Math.ceil(1e3*Math.random()),t="item1_"+Math.ceil(1e3*Math.random());$("#items").addSprite(t,{animation:ve.coin,posx:c-50,posy:Math.random()*p,width:se,height:me}),$("#"+t).addClass("items"),$("#"+t)[0].items=new la($("#"+t),E,0,H),$("#actors").addSprite(a,{animation:Ie[0].idle,posx:c-50,posy:Math.random()*p,width:J,height:V}),$("#"+a).addClass("enemy"),$("#"+a)[0].enemy=new Fa($("#"+a))}else if(e>=.5&e<.7){var t="item1_"+Math.ceil(1e3*Math.random());$("#items").addSprite(t,{animation:ve.heart,posx:c-50,posy:Math.random()*p,width:de,height:ue}),$("#"+t).addClass("items"),$("#"+t)[0].items=new la($("#"+t),F,ge,Y);var a="enemy1_"+Math.ceil(1e3*Math.random());$("#actors").addSprite(a,{animation:Ie[1].idle,posx:c-70,posy:Math.random()*p,width:J,height:V}),$("#"+a).addClass("enemy"),$("#"+a)[0].enemy=new Ba($("#"+a))}else if(e>.7&e<.95){var t="item1_"+Math.ceil(1e3*Math.random());$("#items").addSprite(t,{animation:ve.chakraScroll,posx:c-50,posy:Math.random()*p,width:le,height:he}),$("#"+t).addClass("items"),$("#"+t)[0].items=new la($("#"+t),B,$e,Y)}else if(e>=.95){s.setBossMode(!0);var n="enemy1_"+Math.ceil(1e3*Math.random());$("#actors").addSprite(n,{animation:Ie[2].idle,posx:c-80,posy:Math.random()*p,width:J,height:V}),$("#"+n).addClass("enemy"),$("#"+n)[0].enemy=new Da($("#"+n),function(){console.log("bossMode ended"),s.setBossMode(!1)})}}},f),$.playground().registerCallback(function(){s.isGameOver()||(na(),ta(),aa())},g),$.playground().registerCallback(function(){if(!s.isGameOver())if(be){var e=parseInt($("#player").y())+P,a=parseInt($("#player").x())-P;e>p?$("#player")[0].player.respawn()?!function(){s.setGameOver(!0);var e="#playground";$(e).append('<div style="position: absolute; ... >'),$("#actors,#playerMissileLayer,#enemiesMissileLayer, #meter, #avatar, .score, .items, .level").fadeTo(1e3,0),$("#background").fadeTo(5e3,0,function(){return $(e).clearAll(!0)}),h.show(e,Ge(),ra,oa)}():($("#explosion").remove(),$("#player").children().show(),$("#player").y(p/2),$("#player").x(c/3),Ye(),be=!1):($("#player").y(e),$("#player").x(a))}else{if($("#player")[0].player.update(),jQuery.gameQuery.keyTracker[65]){var t=parseInt($("#player").x())-P;t>0&&$("#player").x(t)}if(jQuery.gameQuery.keyTracker[68]){var t=parseInt($("#player").x())+P;t<c-ee&&$("#player").x(t)}if(jQuery.gameQuery.keyTracker[87]){var t=parseInt($("#player").y())-P;t>0&&$("#player").y(t)}if(jQuery.gameQuery.keyTracker[83]){var t=parseInt($("#player").y())+P;t<p-W&&$("#player").y(t)}}},g)}var va,Ma;$.loadCallback(function(e){$("#loadingBar").width(400*e)});var ba,xa,ka,Qa=new $.gameQuery.Animation({imageURL:O+"smallCloud1.png"}),Ta=new $.gameQuery.Animation({imageURL:O+"smallCloud1.png"}),Ca=new $.gameQuery.Animation({imageURL:O+"mediumCloud3.png"}),La=new $.gameQuery.Animation({imageURL:O+"mediumCloud5.png"}),_a=new $.gameQuery.Animation({imageURL:O+"largeCloud1.png"}),Ra=new $.gameQuery.Animation({imageURL:O+"mediumCloud1.png"}),Ua=new $.gameQuery.Animation({imageURL:O+"LakeStage.png"}),Sa=new $.gameQuery.Animation({imageURL:O+"cloud.png"});Ie[0]=new Array,Ie[0].idle=new $.gameQuery.Animation({imageURL:O+"enemyIdle.png",numberOfFrame:5,delta:80,rate:60,type:$.gameQuery.ANIMATION_ONCE}),Ie[0].attack=new $.gameQuery.Animation((va={imageURL:O+"enemyAttack.png",numberOfFrame:5,delta:80,rate:60},o(va,"numberOfFrame",4),o(va,"distance",81),o(va,"type",$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI),va)),Ie[0].damage=new $.gameQuery.Animation({imageURL:O+"enemyDamage.png",delta:80,rate:60,numberOfFrame:2,distance:81,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI}),Ie[0].explode=new $.gameQuery.Animation({imageURL:O+"enemyDeath.png",delta:80,rate:30,numberOfFrame:3,distance:81,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI|$.gameQuery.ANIMATION_CALLBACK}),Ie[1]=new Array,Ie[1].idle=new $.gameQuery.Animation({imageURL:O+"enemyIdle.png",numberOfFrame:5,delta:80,rate:60,type:$.gameQuery.ANIMATION_ONCE}),Ie[1].attack=new $.gameQuery.Animation((Ma={imageURL:O+"enemyAttack.png",numberOfFrame:5,delta:80,rate:60},o(Ma,"numberOfFrame",4),o(Ma,"distance",81),o(Ma,"type",$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI),Ma)),Ie[1].damage=new $.gameQuery.Animation({imageURL:O+"enemyDamage.png",delta:80,rate:60,numberOfFrame:2,distance:81,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI}),Ie[1].explode=new $.gameQuery.Animation({imageURL:O+"enemyDeath.png",delta:80,rate:30,numberOfFrame:3,distance:81,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI|$.gameQuery.ANIMATION_CALLBACK}),Ie[2]=new Array,Ie[2].idle=new $.gameQuery.Animation({imageURL:O+"tobiIdle.png",numberOfFrame:5,delta:52,rate:60,type:$.gameQuery.ANIMATION_ONCE}),Ie[2].attack=new $.gameQuery.Animation({imageURL:O+"tobiAttackMulti.png",numberOfFrame:5,delta:80,rate:60,distance:98,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_MULTI}),Ie[2].damage=new $.gameQuery.Animation({imageURL:O+"tobiDeathMulti.png",numberOfFrame:2,delta:80,rate:60,distance:98,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_MULTI|$.gameQuery.ANIMATION_REVERSE}),Ie[2].explode=new $.gameQuery.Animation({imageURL:O+"tobiDeathMulti.png",numberOfFrame:5,delta:80,rate:30,distance:98,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI|$.gameQuery.ANIMATION_CALLBACK}),Ne.player=new $.gameQuery.Animation({imageURL:O+"deathblade.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),Ne.enemies=new $.gameQuery.Animation({imageURL:O+"kunai.png",numberOfFrame:6,delta:15,rate:90,type:$.gameQuery.ANIMATION_ONCE}),Ne.playerexplode=new $.gameQuery.Animation({imageURL:O+"deathbladehit.png",numberOfFrame:8,delta:23,rate:90,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_CALLBACK}),Ne.enemiesexplode=new $.gameQuery.Animation({imageURL:O+"kunaihit.png",numberOfFrame:6,delta:15,rate:90,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_CALLBACK}),ve.coin=new $.gameQuery.Animation({imageURL:O+"coin.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),ve.heart=new $.gameQuery.Animation({imageURL:O+"heart.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),ve.chakraScroll=new $.gameQuery.Animation({imageURL:O+"chakraScroll.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),ve.life=new $.gameQuery.Animation({imageURL:O+"1up.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),Me.sfx1=new $.gameQuery.Animation({imageURL:O+"gah.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),Me.sfx2=new $.gameQuery.Animation({imageURL:O+"doka.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),Me.sfx3=new $.gameQuery.Animation({imageURL:O+"surprise.png",numberOfFrame:6,delta:10,rate:90,type:$.gameQuery.ANIMATION_ONCE}),Me.damageSfx=new $.gameQuery.Animation({imageURL:O+"damageMulti.png",numberOfFrame:4,delta:10,rate:90,distance:36,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI}),Me.explosionSfx=new $.gameQuery.Animation({imageURL:O+"explosionMulti.png",numberOfFrame:7,delta:10,rate:90,distance:36,type:$.gameQuery.ANIMATION_ONCE|$.gameQuery.ANIMATION_MULTI}),Me.chargeSfx=new $.gameQuery.Animation({imageURL:O+"chargeAnimation.png",numberOfFrame:2,delta:10,rate:30,distance:93.5,type:$.gameQuery.ANIMATION_HORIZONTAL|$.gameQuery.ANIMATION_VERTICAL|$.gameQuery.ANIMATION_MULTI}),$(document).keydown(function(e){switch(e.keyCode){case 75:Ae=(new Date).getTime(),$("#playerBody").setAnimation(we.attack)}if(0==Ae)switch(e.keyCode){case 65:$("#playerBody").setAnimation(we.backward);break;case 87:$("#playerBody").setAnimation(we.up);break;case 68:$("#playerBody").setAnimation(we.boost);break;case 83:$("#playerBody").setAnimation(we.down);break;case 76:$("#playerBody").setAnimation(we.charge),1==Oe&&(Oe=Ve(Me.chargeSfx,$("#playerBody").x(),$("#playerBody").y(),-10,0,94,69)),(new Date).getTime()%10==0&&($("#player")[0].player.restoreChakra(),Ze())}}),$(document).keyup(function(a){if(0==Ae)switch(a.keyCode){case 65:$("#playerBody").setAnimation(we.idle);break;case 87:$("#playerBody").setAnimation(we.idle);break;case 68:$("#playerBody").setAnimation(we.idle);break;case 83:$("#playerBody").setAnimation(we.idle);break;case 76:$("#playerBody").setAnimation(we.idle),Je(Oe),Oe=1}switch(a.keyCode){case 13:if(Ce){e(Re);var t=Te.shift();sa(t),wa(),$.playground().startGame(function(){$("#welcomeMusic").animate({volume:0},3e3,function(){$("#welcomeMusic")[0].pause()}),$("#fightingMusic").animate({volume:1},3e3,function(){$("#fightingMusic")[0].play()}),$("#welcomeScreen").fadeOut("slow"),He(1)})}break;case 80:$.playground().pauseGame(),$("#fightingMusic").animate({volume:0},"slow",function(){$("#fightingMusic")[0].pause()}),$("#welcomeMusic").animate({volume:1},"slow",function(){$("#welcomeMusic")[0].play()}),$("#welcomeScreen").fadeIn("fast","swing",function(){$("#welcomeScreen").style.display="block"});break;case 79:$.playground().resumeGame(),$("#welcomeMusic").animate({volume:0},"slow",function(){$("#welcomeMusic")[0].pause()}),$("#fightingMusic").animate({volume:1},"slow",function(){$("#fightingMusic")[0].play()}),$("#welcomeScreen").fadeOut("fast");break;case 75:if($("#playerBody").setAnimation(0),!xe){var n=parseInt($("#player").x()),i=parseInt($("#player").y()),r="playerMissile_"+Math.ceil(1e3*Math.random());(new Date).getTime()-Ae;(new Date).getTime()-Ae>30?$("#player")[0].player.chakraDamage(k)&&($("#playerMissileLayer").addSprite(r,{animation:Ne.enemies,posx:n+30,posy:i+14,width:25,height:17}),$("#"+r).addClass("playerMissiles"),$("#"+r)[0].playerMissiles=new ua($("#"+r),U,k,G),$("#"+r).rotate(180)):$("#player")[0].player.chakraDamage(x)&&($("#playerMissileLayer").addSprite(r,{animation:Ne.player,posx:n+50,posy:i+14,width:34,height:36}),$("#"+r).addClass("playerMissiles"),$("#"+r)[0].playerMissiles=new ua($("#"+r),S,x,j),$("#"+r).rotate(10)),Ze()}Ae=0}});var Ea=function(){function e(a){r(this,e),this.collisionDamage=Q,this.shield=X,this.speedx=-5,this.speedy=0,this.node=$(a)}return u(e,[{key:"damage",value:function(e){return this.shield-=e,this.shield<=0}},{key:"update",value:function(e){this.updateX(e),this.updateY(e),Math.random()>=.95&&this.collisionDamage>=T&&(We(this.node),ea(this.node,M))}},{key:"updateY",value:function(e){var a=parseInt(this.node.y())+this.speedy;this.node.y(a)}},{key:"updateX",value:function(e){var a=parseInt(this.node.x())+this.speedx;this.node.x(a)}},{key:"onDestroy",value:function(){this.node.remove()}}]),e}(),Fa=function(e){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.collisionDamage=Q,t}return i(a,e),u(a,[{key:"updateY",value:function(e){var a=parseInt(this.node.y());a>p-50&&this.node.y(a-2)}}]),a}(Ea),Ba=function(e){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.collisionDamage=T,t.shield=q,t.speedy=2,t.speedx=-10,t.alignmentOffset=2,t.playerYPrevPos=0,t}return i(a,e),u(a,[{key:"updateX",value:function(e){var a=parseInt(this.node.x())+this.speedx;this.node.x(a)}},{key:"updateY",value:function(e){if(this.node.y()!=$(e)[0].gameQuery.posy)if(this.node[0].gameQuery.posy+this.alignmentOffset>$(e)[0].gameQuery.posy){var a=parseInt(this.node.y())-this.speedy;this.node.y(a)}else if(this.node[0].gameQuery.posy+this.alignmentOffset<$(e)[0].gameQuery.posy){var a=parseInt(this.node.y())+this.speedy;this.node.y(a)}this.playerYPrevPos=$(e)[0].gameQuery.posy}}]),a}(Ea),Da=function(e){function a(e,t){r(this,a);var i=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return i.collisionDamage=C,i.shield=z,i.speedx=-1,i.alignmentOffset=2,i.moveForward=!0,i.onBossDestroy=t,i}return i(a,e),u(a,[{key:"updateX",value:function(e){var a=parseInt(this.node.x());this.moveForward&a>c-300?this.node.x(a+this.speedx):(this.moveForward=!1,a<c-50?this.node.x(parseInt(this.node.x())-this.speedx):this.moveForward=!0)}},{key:"onDestroy",value:function(){d(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"onDestroy",this).call(this),this.onBossDestroy()}}]),a}(Ba);$("#playground").playground({height:p,width:c,keyTracker:!0}),Aa(),Pe()})},{"./gameover.js":2,"./model.js":3,"./strings.js":4}],2:[function(e,a,t){"use strict";function n(e,a){var t=$("<button class='button'>"+e+"</button>");return t.click(a),t}function i(e,a,t,i,r){var s=n(t,a),m=n(r,i),d=$("<div class='dialog'><h4>Game Over</h4>Your final score was<h3>"+e+"</h3>Rank "+o(e)+"<br></div>");return d.append(m),d.append(s),d.opacity=0,d}function r(e,a,t,n){var r=i(a,t,"Share",n,"Retry");$(e).prepend(r),r.fadeIn()}function o(e){for(var a=10,t=["Dropout","Genin","Chounin","Jounin","Sanin","Kage"],n=1,i=0;e>Math.pow(a,n)&&n<t.length;)n++,i++;return t[i]}a.exports={show:r}},{}],3:[function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),r=function(){function e(){n(this,e),this.onePlayerMode=!0,this.gameOver=!1,this.bossMode=!1,this.score=0,this.killCount=0}return i(e,[{key:"isOnePlayerMode",value:function(){return this.onePlayerMode}},{key:"isGameOver",value:function(){return this.gameOver}},{key:"isBossMode",value:function(){return this.bossMode}},{key:"getScore",value:function(){return this.score}},{key:"getKillCount",value:function(){return this.killCount}},{key:"setPlayerMode",value:function(e){this.onePlayerMode=e}},{key:"setGameOver",value:function(e){this.gameOver=e}},{key:"setBossMode",value:function(e){this.bossMode=e}},{key:"updateScore",value:function(e){this.score+=e}},{key:"updateKillCount",value:function(e){this.killCount+=e}}]),e}();a.exports={game:r}},{}],4:[function(e,a,t){"use strict";var n={id:"#startbutton",chooseMode:"Choose mode",chooseTeam:"Choose team",chooseOrder:"Choose order",startGame:"Press enter to start!"},i={onePlayer:{id:"#1player",text:"1player"},twoPlayers:{id:"#2players",text:"2players"}};a.exports={button:n,mode:i}},{}]},{},[1]);
//# sourceMappingURL=build.js.map
